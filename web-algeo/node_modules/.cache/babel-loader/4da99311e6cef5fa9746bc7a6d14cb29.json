{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport { useEnvironment } from \"@chakra-ui/react-env\";\nimport { isBrowser, noop, __DEV__ } from \"@chakra-ui/utils\";\nimport * as React from \"react\";\nimport { addListener, getColorScheme, root, syncBodyClassName } from \"./color-mode.utils\";\nimport { localStorageManager } from \"./storage-manager\";\nexport var ColorModeContext = /*#__PURE__*/React.createContext({});\n\nif (__DEV__) {\n  ColorModeContext.displayName = \"ColorModeContext\";\n}\n/**\n * React hook that reads from `ColorModeProvider` context\n * Returns the color mode and function to toggle it\n */\n\n\nexport var useColorMode = () => {\n  var context = React.useContext(ColorModeContext);\n\n  if (context === undefined) {\n    throw new Error(\"useColorMode must be used within a ColorModeProvider\");\n  }\n\n  return context;\n};\n/**\n * Provides context for the color mode based on config in `theme`\n * Returns the color mode and function to toggle the color mode\n */\n\nexport function ColorModeProvider(props) {\n  var {\n    value,\n    children,\n    options: {\n      useSystemColorMode,\n      initialColorMode\n    },\n    colorModeManager = localStorageManager\n  } = props;\n  var defaultColorMode = initialColorMode === \"dark\" ? \"dark\" : \"light\";\n  /**\n   * Only attempt to retrieve if we're on the server. Else this will result\n   * in a hydration mismatch warning and partially invalid visuals.\n   *\n   * Else fallback safely to `theme.config.initialColormode` (default light)\n   */\n\n  var [colorMode, rawSetColorMode] = React.useState(colorModeManager.type === \"cookie\" ? colorModeManager.get(defaultColorMode) : defaultColorMode);\n  var {\n    document\n  } = useEnvironment();\n  React.useEffect(() => {\n    /**\n     * Since we cannot initially retrieve localStorage to due above mentioned\n     * reasons, do so after hydration.\n     *\n     * Priority:\n     * - system color mode\n     * - defined value on <ColorModeScript />, if present\n     * - previously stored value\n     */\n    if (isBrowser && colorModeManager.type === \"localStorage\") {\n      var mode = useSystemColorMode ? getColorScheme(defaultColorMode) : root.get() || colorModeManager.get() || getColorScheme(defaultColorMode);\n\n      if (mode) {\n        rawSetColorMode(mode);\n      }\n    }\n  }, [colorModeManager, useSystemColorMode, defaultColorMode]);\n  React.useEffect(() => {\n    var isDark = colorMode === \"dark\";\n    syncBodyClassName(isDark, document);\n    root.set(isDark ? \"dark\" : \"light\");\n  }, [colorMode, document]);\n  var setColorMode = React.useCallback(function (value, isListenerEvent) {\n    if (isListenerEvent === void 0) {\n      isListenerEvent = false;\n    }\n\n    if (!isListenerEvent) {\n      colorModeManager.set(value);\n    } else if (colorModeManager.get() && !useSystemColorMode) return;\n\n    rawSetColorMode(value);\n  }, [colorModeManager, useSystemColorMode]);\n  var toggleColorMode = React.useCallback(() => {\n    setColorMode(colorMode === \"light\" ? \"dark\" : \"light\");\n  }, [colorMode, setColorMode]);\n  React.useEffect(() => {\n    var shouldUseSystemListener = useSystemColorMode || initialColorMode === \"system\";\n    var removeListener;\n\n    if (shouldUseSystemListener) {\n      removeListener = addListener(setColorMode);\n    }\n\n    return () => {\n      if (removeListener && shouldUseSystemListener) {\n        removeListener();\n      }\n    };\n  }, [setColorMode, useSystemColorMode, initialColorMode]); // presence of `value` indicates a controlled context\n\n  var context = React.useMemo(() => ({\n    colorMode: value != null ? value : colorMode,\n    toggleColorMode: value ? noop : toggleColorMode,\n    setColorMode: value ? noop : setColorMode\n  }), [colorMode, setColorMode, toggleColorMode, value]);\n  return /*#__PURE__*/React.createElement(ColorModeContext.Provider, {\n    value: context\n  }, children);\n}\n\nif (__DEV__) {\n  ColorModeProvider.displayName = \"ColorModeProvider\";\n}\n/**\n * Locks the color mode to `dark`, without any way to change it.\n */\n\n\nexport var DarkMode = props => /*#__PURE__*/React.createElement(ColorModeContext.Provider, _extends({\n  value: {\n    colorMode: \"dark\",\n    toggleColorMode: noop,\n    setColorMode: noop\n  }\n}, props));\n\nif (__DEV__) {\n  DarkMode.displayName = \"DarkMode\";\n}\n/**\n * Locks the color mode to `light` without any way to change it.\n */\n\n\nexport var LightMode = props => /*#__PURE__*/React.createElement(ColorModeContext.Provider, _extends({\n  value: {\n    colorMode: \"light\",\n    toggleColorMode: noop,\n    setColorMode: noop\n  }\n}, props));\n\nif (__DEV__) {\n  LightMode.displayName = \"LightMode\";\n}\n/**\n * Change value based on color mode.\n *\n * @param light the light mode value\n * @param dark the dark mode value\n *\n * @example\n *\n * ```js\n * const Icon = useColorModeValue(MoonIcon, SunIcon)\n * ```\n */\n\n\nexport function useColorModeValue(light, dark) {\n  var {\n    colorMode\n  } = useColorMode();\n  return colorMode === \"dark\" ? dark : light;\n}","map":{"version":3,"sources":["../../src/color-mode-provider.tsx"],"names":["ColorModeContext","React","useColorMode","context","options","initialColorMode","colorModeManager","localStorageManager","defaultColorMode","document","useEnvironment","isBrowser","mode","useSystemColorMode","getColorScheme","root","rawSetColorMode","isDark","colorMode","syncBodyClassName","setColorMode","isListenerEvent","toggleColorMode","shouldUseSystemListener","removeListener","addListener","value","ColorModeProvider","DarkMode","props","noop","LightMode"],"mappings":"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","sourcesContent":["import { useEnvironment } from \"@chakra-ui/react-env\"\nimport { isBrowser, noop, __DEV__ } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\nimport {\n  addListener,\n  ColorMode,\n  getColorScheme,\n  root,\n  syncBodyClassName,\n} from \"./color-mode.utils\"\nimport { localStorageManager, StorageManager } from \"./storage-manager\"\n\ntype ConfigColorMode = ColorMode | \"system\" | undefined\nexport type { ColorMode, ConfigColorMode }\n\nexport interface ColorModeOptions {\n  initialColorMode?: ConfigColorMode\n  useSystemColorMode?: boolean\n}\n\ninterface ColorModeContextType {\n  colorMode: ColorMode\n  toggleColorMode: () => void\n  setColorMode: (value: any) => void\n}\n\nexport const ColorModeContext = React.createContext({} as ColorModeContextType)\n\nif (__DEV__) {\n  ColorModeContext.displayName = \"ColorModeContext\"\n}\n\n/**\n * React hook that reads from `ColorModeProvider` context\n * Returns the color mode and function to toggle it\n */\nexport const useColorMode = () => {\n  const context = React.useContext(ColorModeContext)\n  if (context === undefined) {\n    throw new Error(\"useColorMode must be used within a ColorModeProvider\")\n  }\n  return context\n}\n\nexport interface ColorModeProviderProps {\n  value?: ColorMode\n  children?: React.ReactNode\n  options: ColorModeOptions\n  colorModeManager?: StorageManager\n}\n\n/**\n * Provides context for the color mode based on config in `theme`\n * Returns the color mode and function to toggle the color mode\n */\nexport function ColorModeProvider(props: ColorModeProviderProps) {\n  const {\n    value,\n    children,\n    options: { useSystemColorMode, initialColorMode },\n    colorModeManager = localStorageManager,\n  } = props\n\n  const defaultColorMode = initialColorMode === \"dark\" ? \"dark\" : \"light\"\n\n  /**\n   * Only attempt to retrieve if we're on the server. Else this will result\n   * in a hydration mismatch warning and partially invalid visuals.\n   *\n   * Else fallback safely to `theme.config.initialColormode` (default light)\n   */\n  const [colorMode, rawSetColorMode] = React.useState<ColorMode | undefined>(\n    colorModeManager.type === \"cookie\"\n      ? colorModeManager.get(defaultColorMode)\n      : defaultColorMode,\n  )\n\n  const { document } = useEnvironment()\n\n  React.useEffect(() => {\n    /**\n     * Since we cannot initially retrieve localStorage to due above mentioned\n     * reasons, do so after hydration.\n     *\n     * Priority:\n     * - system color mode\n     * - defined value on <ColorModeScript />, if present\n     * - previously stored value\n     */\n    if (isBrowser && colorModeManager.type === \"localStorage\") {\n      const mode = useSystemColorMode\n        ? getColorScheme(defaultColorMode)\n        : root.get() ||\n          colorModeManager.get() ||\n          getColorScheme(defaultColorMode)\n\n      if (mode) {\n        rawSetColorMode(mode)\n      }\n    }\n  }, [colorModeManager, useSystemColorMode, defaultColorMode])\n\n  React.useEffect(() => {\n    const isDark = colorMode === \"dark\"\n\n    syncBodyClassName(isDark, document)\n    root.set(isDark ? \"dark\" : \"light\")\n  }, [colorMode, document])\n\n  const setColorMode = React.useCallback(\n    (value: ColorMode, isListenerEvent = false) => {\n      if (!isListenerEvent) {\n        colorModeManager.set(value)\n      } else if (colorModeManager.get() && !useSystemColorMode) return\n\n      rawSetColorMode(value)\n    },\n    [colorModeManager, useSystemColorMode],\n  )\n\n  const toggleColorMode = React.useCallback(() => {\n    setColorMode(colorMode === \"light\" ? \"dark\" : \"light\")\n  }, [colorMode, setColorMode])\n\n  React.useEffect(() => {\n    const shouldUseSystemListener =\n      useSystemColorMode || initialColorMode === \"system\"\n    let removeListener: any\n    if (shouldUseSystemListener) {\n      removeListener = addListener(setColorMode)\n    }\n    return () => {\n      if (removeListener && shouldUseSystemListener) {\n        removeListener()\n      }\n    }\n  }, [setColorMode, useSystemColorMode, initialColorMode])\n\n  // presence of `value` indicates a controlled context\n  const context = React.useMemo(\n    () => ({\n      colorMode: (value ?? colorMode) as ColorMode,\n      toggleColorMode: value ? noop : toggleColorMode,\n      setColorMode: value ? noop : setColorMode,\n    }),\n    [colorMode, setColorMode, toggleColorMode, value],\n  )\n\n  return (\n    <ColorModeContext.Provider value={context}>\n      {children}\n    </ColorModeContext.Provider>\n  )\n}\n\nif (__DEV__) {\n  ColorModeProvider.displayName = \"ColorModeProvider\"\n}\n\n/**\n * Locks the color mode to `dark`, without any way to change it.\n */\nexport const DarkMode: React.FC = (props) => (\n  <ColorModeContext.Provider\n    value={{ colorMode: \"dark\", toggleColorMode: noop, setColorMode: noop }}\n    {...props}\n  />\n)\n\nif (__DEV__) {\n  DarkMode.displayName = \"DarkMode\"\n}\n\n/**\n * Locks the color mode to `light` without any way to change it.\n */\nexport const LightMode: React.FC = (props) => (\n  <ColorModeContext.Provider\n    value={{ colorMode: \"light\", toggleColorMode: noop, setColorMode: noop }}\n    {...props}\n  />\n)\n\nif (__DEV__) {\n  LightMode.displayName = \"LightMode\"\n}\n\n/**\n * Change value based on color mode.\n *\n * @param light the light mode value\n * @param dark the dark mode value\n *\n * @example\n *\n * ```js\n * const Icon = useColorModeValue(MoonIcon, SunIcon)\n * ```\n */\nexport function useColorModeValue<TLight = unknown, TDark = unknown>(\n  light: TLight,\n  dark: TDark,\n) {\n  const { colorMode } = useColorMode()\n  return colorMode === \"dark\" ? dark : light\n}\n"]},"metadata":{},"sourceType":"module"}